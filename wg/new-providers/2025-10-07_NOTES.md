## Attendees

 - James Humphries
 - Martin Atkins
 - Laurence Bordowitz
 - Andrei Ciobanu
 - Diogenes Fernandes
 - Ilia Gogotchuri
 - Troy Knapp
 - Christian Mesh

## Notes

### Meeting Recap and Action Items
James Humphries initiated the meeting by recapping previous discussions on a new Open Tofu provider protocol, highlighting the goal of unlocking new functionality and the desire for open design. Key action items from the last meeting included discussing protocol specification pros and cons, updates on transport protocols, and collecting a feature catalog.

### Provider Protocol Technical Trade-offs Document
James Humphries asked Martin Atkins for an update on the "provider protocol technical trade-offs" document, to which Martin Atkins responded that the document became a generic explanation of technical concepts without clear goals or constraints. 
Martin Atkins concluded that he found it to not be useful and that the focus should be on defining the problem before designing solutions, although it contained some historical context about things like WASI being immature.

### Feature Catalog Summary and Organization
Christian Mesh presented their summary of the catalog, categorizing items into new functionalities and extensions of existing OpenTofu concepts, acknowledging the document was still a "mess" and needed tidying up. Martin Atkins expressed a preference for reviewing a summary over individual issues to avoid repetition of a previous lengthy meeting.

> [!NOTE]
> For the sake of keeping this document brief, each of the features below will be described in the upcoming feature catalog, so we have only made notes on the discussion around them.

#### New Functionality: Time Cost Estimator
Christian Mesh introduced the "time cost estimator" as a new feature that inspired the middleware concept, as it involves adding brand-new functionality rather than extending existing ones. James Humphries clarified that middleware is not the only solution and suggested that we could integrated cost estimation directly into providers as an extension of resource types.

#### New Functionality: Resource Statistics and State Storage
Christian Mesh discussed gathering statistics on resource usage, which could fit within middleware or similar concepts for reporting metadata on resources.
They also mentioned more efficient state storage and locking, clarifying that pluggable state storage (PSS) does not overlap with granular state storage within OpenTofu. 
Sidenote: James Humphries noted that PSS refers to HashiCorp's implementation of state storage inside a provider.

#### New Functionality: Resource Relationships Mapping
Christian Mesh brought up resource relationships mapping, an issue Martin Atkins had created in the past. Troy Knapp further explained the problem, giving the example of EKS and Argo, where defining ownership relationships would prevent the need to destroy a child resource to destroy its parent. 
Martin Atkins identified three approaches for defining relationships: provider developers, module authors, or middleware.

#### New Functionality: Pluggable Commands and Linting
Christian Mesh discussed "pluggable commands," allowing providers to effectively write OpenTofu tools for processing configuration. 
Troy Knapp questioned if this overlapped with Terraform actions, but Christian Mesh clarified that it's about adding specific command-line options.
The discussion also covered first-party linting support, with Martin Atkins noting three tiers of linting rules: built-in, provider-specific, and end-user defined.

#### Improving Existing Functionality: Provider Responses and Configuration Edits
Christian Mesh mentioned improved responses from providers on failure and the concept of providers suggesting edits to HCL configuration, which Christian Mesh personally disliked but was open to changing their mind on.
Martin Atkins proposed a compromise where providers could patch data structures rather than directly editing HCL.

#### Improving Existing Functionality: Drift Detection Hints and Progress Reporting
Christian Mesh detailed "drift detection hints," allowing providers to suggest how often a resource needs to be checked, which could overlap with "tofu plan light". 
Martin Atkins questioned how providers could predict changes, noting it seems more like an environment property than an AWS property.
Christian Mesh also discussed allowing providers to report progress during operations, streaming back detailed information instead of generic "creating" messages.
Martin Atkins suggested that if a provider signals it can provide its own status updates, OpenTofu would not produce repetitive messages.

#### Improving Existing Functionality: Language Server Hints and Output Verbosity
Christian Mesh and James Humphries discussed provider-specific hints for language servers, enabling static analysis rules or best practices based on schema requirements.
James Humphries linked this to linting, static analysis, and formatting, emphasizing the distinction of who writes the rules and the potential for "code actions".
Christian Mesh also addressed allowing plugins to specify which unchanged fields should always be shown in output, providing more context for diffs.

#### Improving Existing Functionality: Configured Provider Defined Functions and Dynamic Configuration
Christian Mesh brought up better approaches to configured provider-defined functions, noting the desire for users to write functions in familiar languages without excessive hoops.
James Humphries questioned introducing a way to configure providers later to address limitations around configured versus unconfigured providers.
Troy Knapp raised the challenge of rotating credentials for providers, suggesting a need for dynamic configuration and re-evaluation loops.

#### Miscellaneous Functionality and Future Research
Christian Mesh briefly mentioned finding key providers and methods for state encryption and proxying between providers as implementation details rather than standalone features.
James Humphries discussed the ability to cache results of expensive calls on the provider side, envisioning an SDK-side HTTP client with TTL or cache for requests.
Christian Mesh raised "provider defined test blocks," where James Humphries explained the idea was inspired by being a layer on top of existing functionality like Terraform actions, allowing providers to define health checks or tests for resources.

### Prioritizing Feature Catalog and Defining New Action Items
James Humphries suggested that the group responsible for compiling the feature catalog (Andrei, Ilia, Troy, and Christian) continue refining it through Slack communication.
Martin Atkins proposed a new category to document questions that are focusing on provider developer perspectives, such as supported languages and distribution methods.
James Humphries and Martin Atkins agreed to start collecting their thoughts and questions in these areas, focusing on distribution and security first.

## Action Items

Christian Mesh, Andrei Ciobanu, and Troy Knapp: Continue working on and cleaning up the feature catalog
James Humphries and Martin Atkins: Start collecting thoughts and asking questions about the distribution and security aspects of providers, focusing on how they are written and distributed
